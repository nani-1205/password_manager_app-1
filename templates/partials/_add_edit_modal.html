<!-- templates/partials/_add_edit_modal.html -->
{# This modal will be used for BOTH Add and Edit #}
{# JavaScript will set the title, action, button text, and pre-fill data for Edit #}
<div class="modal fade" id="entryModal" tabindex="-1" aria-labelledby="entryModalLabel" aria-hidden="true" data-bs-backdrop="static">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content"> {# Bootstrap handles dark theme styles via quantum-v3.css #}
            <form method="POST" action="" id="entry-modal-form"> {# Action set dynamically by JS #}
                <div class="modal-header">
                    <h5 class="modal-title" id="entryModalLabel">Vault Entry</h5> {# Title set dynamically by JS #}
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                     {# Hidden field to store entry ID - useful for JS, though action URL is primary #}
                     <input type="hidden" id="modal_entry_id" name="entry_id_for_js_reference">

                     {# Laptop/Server ID Field #}
                     <div class="form-group">
                        <label for="modal_laptop_server" class="form-label">Laptop/Server ID:</label>
                        <input type="text" class="form-input" id="modal_laptop_server" name="laptop_server" required>
                    </div>
                    {# Brand/Label Field #}
                    <div class="form-group">
                        <label for="modal_brand_label" class="form-label">Brand/Label <span class="text-muted">(Optional)</span>:</label>
                        <input type="text" class="form-input" id="modal_brand_label" name="brand_label">
                    </div>
                    {# Username Field #}
                    <div class="form-group">
                        <label for="modal_entry_username" class="form-label">Username:</label>
                        <input type="text" class="form-input" id="modal_entry_username" name="entry_username" required>
                    </div>
                    {# Password Field #}
                     <div class="form-group">
                        <label for="modal_entry_password" class="form-label">Password:</label>
                        <div class="input-group">
                             {# Placeholder changes based on add/edit via JS #}
                             <input type="password" class="form-input" id="modal_entry_password" name="password" placeholder="Enter password" autocomplete="new-password">
                             <button class="btn btn-outline" type="button" id="generate-modal-btn" title="Generate Password"><i class="bi bi-stars"></i></button>
                             <button class="btn btn-outline" type="button" id="show-hide-modal-btn" data-target="modal_entry_password" title="Show Password"><i class="bi bi-eye-fill"></i></button>
                        </div>
                         {# Help text shown only for edit #}
                         <div id="modalPasswordHelp" class="form-text text-secondary mt-1" style="font-size: 0.85em; display: none;">
                            Leave blank to keep the current password.
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-outline" data-bs-dismiss="modal">Cancel</button>
                    {# Submit button text and style set by JS #}
                    <button type="submit" class="btn btn-primary" id="modal_submit_button">Save</button>
                </div>
            </form>
        </div>
    </div>
</div>